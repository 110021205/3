# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1BVvklFNAlykaoxz4LEPKaDbDlGGuk5DX
"""

from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from webdriver_manager.chrome import ChromeDriverManager
from bs4 import BeautifulSoup

# è¨­å®š Chrome ç„¡é ­æ¨¡å¼
options = Options()
options.add_argument("--headless")
options.add_argument("--no-sandbox")
options.add_argument("--disable-dev-shm-usage")
options.binary_location = '/usr/bin/google-chrome'

# å•Ÿå‹• Selenium
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=options)

# é–‹å•Ÿç›®æ¨™ç¶²é 
url = "https://csie.asia.edu.tw/zh_tw/TeacherIntroduction/Full_time_professor"
driver.get(url)

# ç­‰å¾…å…§å®¹è¼‰å…¥
WebDriverWait(driver, 10).until(EC.presence_of_all_elements_located((By.CLASS_NAME, "i-member-item")))

# æ“·å–ç¶²é å…§å®¹
soup = BeautifulSoup(driver.page_source, "html.parser")
professors = soup.select(".i-member-item")

# é–‹å•Ÿæª”æ¡ˆæº–å‚™å¯«å…¥
with open("professors.txt", "w", encoding="utf-8") as f:
    for prof in professors:
        # å§“å
        name_tag = prof.select_one(".member-data-value-name a")
        name = name_tag.text.strip() if name_tag else "æœªçŸ¥å§“å"

        # ç ”ç©¶é ˜åŸŸ
        field_tag = prof.select_one(".member-data-value-7")
        field = field_tag.text.strip() if field_tag else "ç„¡è³‡æ–™"

        # è¼¸å‡ºèˆ‡å­˜æª”
        output = f"ğŸ‘¨â€ğŸ« å§“åï¼š{name}\nğŸ”¬ å°ˆé•·ï¼š{field}\n{'-'*40}\n"
        print(output)
        f.write(output)

driver.quit()

# å®‰è£ Chrome å’Œ ChromeDriver
!apt-get update
!apt-get install -y wget unzip
!wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
!dpkg -i google-chrome-stable_current_amd64.deb || apt-get -fy install

# å®‰è£ Selenium æ‰€éœ€å¥—ä»¶
!pip install selenium webdriver-manager bs4

# å¯«çˆ¬èŸ²
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
from bs4 import BeautifulSoup

# è¨­å®š Chrome é¸é …ï¼ˆç„¡é ­æ¨¡å¼ï¼‰
options = Options()
options.add_argument('--headless')
options.add_argument('--no-sandbox')
options.add_argument('--disable-dev-shm-usage')
options.binary_location = '/usr/bin/google-chrome'

# å•Ÿå‹• driver
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=options)

# å‰å¾€ç¶²é 
url = "https://csie.asia.edu.tw/zh_tw/TeacherIntroduction/Full_time_faculty"
driver.get(url)

# å–å¾— HTML ä¸¦è§£æ
html = driver.page_source
soup = BeautifulSoup(html, "html.parser")
print(soup.prettify())
professors = soup.select('.i-member')



# é—œé–‰ç€è¦½å™¨
driver.quit()